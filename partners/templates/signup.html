{% load static from staticfiles %}

<h1>
  Registrati
  
</h1>
<br>
<form action='' class='signup-form'>
  
  <div class='col-sm-6'>
    <section data-bind='visible:lpi.is_logged()'>
      <h3>Scegli il contatto</h3>
      <div data-bind='foreach: companies()'>
        <input type='radio' name='company' 
               data-bind='attr: {value: company}, checked: $root.selected_company'></input>
        <label data-bind='attr:{for: company}, text: company_name'></label>
        <br>
      </div>
      <input type='radio' id='default' name='company' value='-1' data-bind='checked: $root.selected_company'>
      </input>
      <label data-bind='click: function() { set_company(-1)}' for='company'>
         Nuovo contatto</label><br>
    </section>

    <section data-bind=''>
      <h3 data-bind='visible: check_family("atp,aap")'>Nome della scuola</h3>
      <h3 data-bind='visible: check_family("sp")'>Nome dell'azienda</h3>
      <h3 data-bind='visible: check_family("ct")'>Informazioni personali</h3>
      <div class="input-group">
        <span class="input-group-addon">
          <span class='glyphicon glyphicon-envelope'></span>
        </span>
        <input type='text' class='form-control' 
               data-bind='value: company_name, disable: $root.selected_company() >= 0'
               placeholder='Nome'>
      </div>

      <div class="input-group" data-bind='visible: check_family("ct")'>
        <span class="input-group-addon">
          <span class='glyphicon glyphicon-envelope'></span>
        </span>
        <input type='text' class='form-control' 
               data-bind='value: last_name, disable: $root.selected_company() >= 0'
               placeholder='Cognome'>
      </div>
      <h3>I tuoi dati di accesso</h3>
      <div class="input-group">
        <span class="input-group-addon">
          <span class='glyphicon glyphicon-home'></span>
        </span>
        <input type='text' class='form-control' 
               data-bind='value: mail, disable: $root.selected_company() >= 0'
               placeholder='La tua email'>
      </div>

      <div class="input-group">
        <span class="input-group-addon">
          <span class="glyphicon glyphicon-lock"></span>
        </span>
        <input type='password' class='form-control' 
               data-bind='value: password, disable: $root.selected_company() >= 0'
               placeholder='Scegli una password'><br>
      </div>

      <div class="input-group">
        <span class="input-group-addon">
          <span class="glyphicon glyphicon-asterisk"></span>
        </span>          
        <input type='password' class='form-control' 
               data-bind='value: confirm_password, disable: $root.selected_company() >= 0'
               placeholder='Conferma password'><br>
      </div>
    </section>



    <div class="checkbox">
      <label>
        <input data-bind='checked: tos_accepted' type="checkbox"> 
          Ho letto e accetto i 
          <a target='_blank' href='http://nuovo.lpi-italia.org/termini-di-servizio'>Termini di Servizio</a>.
      </label>
    </div>
    <div class="checkbox">
      <label>
        <input data-bind='checked: privacy_accepted' type="checkbox"> 
          Ho letto e accetto l'informativa sulla 
          <a target='_blank' href='http://nuovo.lpi-italia.org/privacy'>Privacy</a>.
      </label>
    </div>
    
    
    <br><br>
    
    <section data-bind='visible: !lpi.is_logged()'>
      <a class='button' data-bind='click: register'>Registrati</a>

      <a style='padding-left:20px' data-bind='attr: {href: "#login/" + handle()}'>
        Gia' registrato? 
      </a>
    </section>

    <section data-bind='visible: lpi.is_logged()'>
      <a class='button' data-bind='click: attach'>Aderisci</a>
    </section>
  </div>

  <div class="col-sm-6" data-bind='visible: error_message'>
    <h3>Errore</h3>
    <div class='alert alert-danger' 
           data-bind='html: error_message'>
    </div>
  </div>

</form>

<div style='clear:both'></div>
